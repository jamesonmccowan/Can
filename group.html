<!DOCTYPE html>
<html>
<head>
    <title>Can - Group Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="styles/global.css" />
    <style type="text/css">
body    {background: black;}
    </style>
    <script type="text/javascript" src="scripts/can.js"></script>
    <script type="text/javascript"><!--
var test = function () {
    var stage = can.stage(document.getElementsByTagName("canvas")[0]);
    stage.fitWindow();
    var group = can.group({x:40, y:40, width:100, height:100});
    var r = can.rect({x:10, y:10, width:10, height:10, fill:"red", stroke:"green"});
    var g = can.rect({x:25, y:10, width:10, height:10, stroke:"green"});
    var b = can.rect({x:40, y:10, width:10, height:10, fill:"red"});
    var t = can.text({str:"Click to Spin!\nDrag to Move!", x:30, y:30, width:150, fill:"white", align:"center"});
    r.addTo(group);
    g.addTo(group);
    b.addTo(group);
    t.addTo(group);
    stage.add(group);
    stage.draw();

    var id = 0;
    group.on("click", function () {
        if (id == 0) {
            id = setInterval(function () {
                group.rotateBy(1/16);
                stage.draw();
            }, 1000/60);
        } else {
            clearInterval(id);
            id = 0;
        }
    });
    group.on("mousedown", function (e) {
        this.xs = e.x;
        this.ys = e.y;
    });
    group.on("mousedrag", function (e) {
        this.move(e.x-this.xs, e.y-this.ys);
        this.xs = e.x;
        this.ys = e.y;
        stage.draw();
    });
}

window.addEventListener("load", test, false);
    --></script>
</head>
<body>
    <canvas></canvas>
</body>
</html>
