<!DOCTYPE html>
<html>
<head>
    <title>Can - Mouse Click Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="styles/global.css" />
    <script type="text/javascript" src="scripts/can.js"></script>
    <script type="text/javascript"><!--
var test = function () {
    var stage = can.stage(document.getElementsByTagName("canvas")[0]);
    stage.fitWindow();
    var back = can.rect({x:0, y:0, width:stage.width(), height:stage.height(), fill:"#fff"});
    stage.add(back);

    var mousedrag = can.text({str:"Mouse Drag", x:10, y:10, fill:"#00a"});
    stage.add(mousedrag);
    mousedrag.on("mousedown", function (e) {
        this.xs = e.x;
        this.ys = e.y;
    });
    mousedrag.on("mousedrag", function (e) {
        this.text("DRAGGED!");
        this.fill = "#f00";
        this.move(e.x-this.xs, e.y-this.ys);
        this.xs = e.x;
        this.ys = e.y;
    });

    var click = can.text({str:"Click", x:10, y:40, fill:"#00a"});
    stage.add(click);
    var clickCount = 0;
    click.on("click", function (e) {
        this.text("CLICKED! (" + (++clickCount) + ")");
        this.fill = "#f00";
        stage.draw();
    });

    dblclick = can.text({str:"Double Click", x:10, y:70, fill:"#00a"});
    stage.add(dblclick);
    var dblclickCount = 0;
    dblclick.on("dblclick", function (e) {
        this.text("Double CLICKED! (" + (++dblclickCount) + ")");
        this.fill = "#f00";
        stage.draw();
    });

    var mouseenter = can.text({str:"Mouse Enter", x:10, y:100, fill:"#00a"});
    stage.add(mouseenter);
    mouseenter.on("mouseenter", function (e) {
        this.text("Mouse Entered!");
        this.fill = "#f00";
        stage.draw();
    });

    var mouseleave = can.text({str:"Mouse Leave", x:10, y:130, fill:"#00a"});
    stage.add(mouseleave);
    mouseleave.on("mouseleave", function (e) {
        this.text("Mouse Left!");
        this.fill = "#f00";
        stage.draw();
    });

    var mousedown = can.text({str:"Mouse Down", x:10, y:160, fill:"#00a"});
    stage.add(mousedown);
    mousedown.on("mousedown", function (e) {
        this.text("Mouse Press!");
        this.fill = "#f00";
        stage.draw();
    });

    mousemoves = can.text({str:"Mouse Move", x:10, y:190, fill:"#00a"});
    stage.add(mousemoves);
    back.on("mousemove", function (e) {
        mousemoves.text("(x: " + e.x + ", y: " + e.y + ")");
        mousemoves.fill = "#000";
        stage.draw();
    });

    var mouseup = can.text({str:"Mouse Up", x:10, y:220, fill:"#00a"});
    stage.add(mouseup);
    mouseup.on("mouseup", function (e) {
        this.text("Mouse Up!");
        this.fill = "#f00";
        stage.draw();
    });

    var offscreen = can.text({str:"offscreen (click to test)", x:10, y:250, fill:"#00a"});
    stage.add(offscreen);
    offscreen.on("offscreen", function (e) {
        this.text("Is Off Screen!");
        this.fill = "#f00";
        alert(this.str);
        this.offset(10, 250);
        this.remove();
    });
    offscreen.on("click", function (e) {
        this.offset(0,-30);
        stage.draw();
    });


    stage.draw();
}
window.addEventListener("load", test, false);
    --></script>
</head>
<body>
    <canvas></canvas>
</body>
</html>
